---

#apiVersion: v1
#kind: ServiceAccount
#metadata:
#  name: afraid-service-account
#  namespace: 00x56
#
#---
#
#apiVersion: rbac.authorization.k8s.io/v1
#kind: ClusterRole
#metadata:
#  name: afraid-role
#rules:
#  - apiGroups: [""]
#    resources: ["persistentvolumes"]
#    verbs: ["get", "list", "watch", "create", "delete"]
#  - apiGroups: [""]
#    resources: ["persistentvolumeclaims"]
#    verbs: ["get", "list", "watch", "update"]
#  - apiGroups: ["storage.k8s.io"]
#    resources: ["storageclasses"]
#    verbs: ["get", "list", "watch"]
#  - apiGroups: [""]
#    resources: ["events"]
#    verbs: ["create", "update", "patch"]
#
#---
#
#apiVersion: rbac.authorization.k8s.io/v1
#kind: ClusterRoleBinding
#metadata:
#  name: afraid-role-binding
#subjects:
#  - kind: ServiceAccount
#    name: afraid-service-account
#    namespace: 00x56
#roleRef:
#  kind: ClusterRole
#  name: afraid-role
#  apiGroup: rbac.authorization.k8s.io

---

apiVersion: batch/v1
kind: CronJob
metadata:
  name: afraid-cron-job
  namespace: 00x56
spec:
  schedule: "0,5,10,15,20,25,30,35,40,45,50,55 * * * *"
  concurrencyPolicy: Forbid
  successfulJobsHistoryLimit: 1
  failedJobsHistoryLimit: 3
  jobTemplate:
    spec:
      template:
        metadata:
          labels:
            app: afraid-cron-job
        spec:
          restartPolicy: Never
          containers:
            - name: afraid-cron-job
              image: curlimages/curl
              imagePullPolicy: IfNotPresent
              command: [ '/bin/sh', '-c', '/usr/bin/curl -s https://freedns.afraid.org/dynamic/update.php' ]

---
